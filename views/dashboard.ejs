<%- include('layouts/main', { pageTitle }) %>
<main class="dashboard">
  <section class="hero">
    <div>
      <p class="eyebrow">Twoje centrum dowodzenia</p>
      <h1>Witaj ponownie, <%= currentUser?.firstName %>!</h1>
      <p class="muted">
        Zarządzaj rezerwacjami świetlicy, śledź aktywność kolegów i odkrywaj wolne sloty w sprzętach.
      </p>
      <div class="hero__stats">
        <div>
          <p class="hero__stat-number"><%= bookingCount %></p>
          <p class="hero__stat-label">Aktywnych rezerwacji</p>
        </div>
        <div>
          <p class="hero__stat-number"><%= equipmentSummaries.length %></p>
          <p class="hero__stat-label">Dostępnych sprzętów</p>
        </div>
      </div>
    </div>
  </section>

  <section class="panel" id="equipment">
    <header class="panel__header">
      <div>
        <p class="eyebrow">Oferta</p>
        <h2>Sprzęt gotowy do rezerwacji</h2>
      </div>
    </header>
    <% if (equipmentSummaries.length === 0) { %>
      <div class="empty-state" style="padding: 2rem; text-align: center;">
        <h3 style="margin-bottom: .5rem;">Brak dostępnego sprzętu</h3>
        <% if (currentUser && currentUser.role === 'admin') { %>
          <p class="muted" style="margin-bottom: 1rem;">
            Wygląda na to, że żaden sprzęt nie jest dodany lub włączony.
            Przejdź do panelu administratora, aby dodać nowy sprzęt lub go włączyć.
          </p>
          <a class="btn btn--primary" href="/admin">Otwórz panel administratora</a>
        <% } else { %>
          <p class="muted" style="margin-bottom: 1rem;">
            Aktualnie żaden sprzęt nie jest dostępny do rezerwacji. Spróbuj ponownie później
            lub skontaktuj się z administratorem.
          </p>
          <a class="btn btn--ghost" href="/my-bookings">Zobacz moje rezerwacje</a>
        <% } %>
      </div>
    <% } else { %>
      <div class="equipment-grid">
        <% equipmentSummaries.forEach((summary) => { %>
          <%- include('partials/equipmentCard', { equipment: summary.equipment, slots: summary.slots }) %>
        <% }) %>
      </div>
    <% } %>
  </section>
</main>
<%- include('partials/footer') %>
